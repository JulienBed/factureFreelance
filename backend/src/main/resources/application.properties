# Application Configuration
quarkus.application.name=facture-freelance

# HTTP Configuration
quarkus.http.port=8080
quarkus.http.cors=true
quarkus.http.cors.origins=http://localhost:5173,http://localhost:3000
quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS
quarkus.http.cors.headers=accept,authorization,content-type,x-requested-with
quarkus.http.cors.exposed-headers=Content-Disposition
quarkus.http.cors.access-control-max-age=24H
quarkus.http.cors.access-control-allow-credentials=true

# Database Configuration
quarkus.datasource.db-kind=postgresql
quarkus.datasource.username=postgres
quarkus.datasource.password=postgres
quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5432/facture_db
quarkus.datasource.jdbc.max-size=16

# Hibernate Configuration
quarkus.hibernate-orm.database.generation=none
quarkus.hibernate-orm.log.sql=true
quarkus.hibernate-orm.sql-load-script=no-file

# Flyway Configuration (Database Migrations)
quarkus.flyway.migrate-at-start=true
quarkus.flyway.baseline-on-migrate=true
quarkus.flyway.baseline-version=1
quarkus.flyway.locations=db/migration

# JWT Configuration
mp.jwt.verify.publickey.location=META-INF/publicKey.pem
mp.jwt.verify.issuer=https://facture-freelance.com
smallrye.jwt.sign.key.location=META-INF/privateKey.pem
mp.jwt.verify.clock.skew=60

# JWT Token Expiration (in seconds)
jwt.access.token.expiration=900
jwt.refresh.token.expiration=604800

# OIDC Configuration (Google)
# OIDC is disabled by default and enabled only if GOOGLE_CLIENT_ID is set
quarkus.oidc.enabled=${GOOGLE_CLIENT_ID:false}
quarkus.oidc.auth-server-url=https://accounts.google.com
quarkus.oidc.client-id=${GOOGLE_CLIENT_ID:}
quarkus.oidc.credentials.secret=${GOOGLE_CLIENT_SECRET:}
quarkus.oidc.application-type=web-app
quarkus.oidc.authentication.redirect-path=/api/auth/google/callback
quarkus.oidc.authentication.scopes=openid,profile,email

# Mailer Configuration
quarkus.mailer.from=noreply@facture-freelance.com
# Use mock mailer by default (emails are logged, not sent)
quarkus.mailer.mock=true

# OTP Configuration
otp.expiration.minutes=5
otp.length=6
# En mode dev, utiliser un OTP fixe (123456) au lieu d'un code aléatoire
# Utile pour les tests locaux quand les emails ne sont pas envoyés
otp.dev.enabled=false

# Scheduler Configuration
quarkus.scheduler.enabled=true

# Quartz Configuration (for advanced scheduling)
quarkus.quartz.clustered=false
quarkus.quartz.store-type=ram

# OpenSearch Configuration
opensearch.host=localhost
opensearch.port=9200
opensearch.scheme=http
opensearch.index.invoices=invoices

# Logging
quarkus.log.console.enable=true
quarkus.log.console.format=%d{HH:mm:ss} %-5p [%c{2.}] (%t) %s%e%n
quarkus.log.level=INFO
quarkus.log.category."com.facture".level=DEBUG

# Dev Services (for development)
%dev.quarkus.datasource.devservices.enabled=true
%dev.quarkus.datasource.devservices.image-name=postgres:15
%dev.quarkus.mailer.mock=true
%dev.otp.dev.enabled=true

# Test Configuration
%test.quarkus.datasource.db-kind=h2
%test.quarkus.datasource.jdbc.url=jdbc:h2:mem:test
%test.quarkus.hibernate-orm.database.generation=drop-and-create
%test.quarkus.mailer.mock=true

# Production Configuration
%prod.quarkus.hibernate-orm.log.sql=false
%prod.quarkus.log.level=WARN
%prod.quarkus.http.cors.origins=${FRONTEND_URL:https://app.facture-freelance.com}
# Note: SMTP configuration should be set via environment variables if needed
# quarkus.mailer.host, quarkus.mailer.port, etc. can be set directly via env vars
